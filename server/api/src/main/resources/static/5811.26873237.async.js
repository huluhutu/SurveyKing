(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[5811],{31194:function(ve,ae,c){"use strict";c.d(ae,{F:function(){return A}});var R=c(67294),K=c(88182),A=function($,p){var N;if("ConfigContext"in K.ZP){var I=(0,R.useContext)(K.ZP.ConfigContext).getPrefixCls;return I($,p==null?void 0:p.prefixCls)}else{var q=(N=p==null?void 0:p.prefixCls)!==null&&N!==void 0?N:"ant-";return"".concat(q).concat($!=null?$:"")}}},43844:function(ve,ae,c){"use strict";c.d(ae,{lt:function(){return je},$u:function(){return we},Hp:function(){return Se}});var R=c(67294),K=c(25278),A=function(){return A=Object.assign||function(M){for(var O,B=1,F=arguments.length;B<F;B++){O=arguments[B];for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(M[E]=O[E])}return M},A.apply(this,arguments)},$=function(M,O){var B={};for(var F in M)Object.prototype.hasOwnProperty.call(M,F)&&O.indexOf(F)<0&&(B[F]=M[F]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,F=Object.getOwnPropertySymbols(M);E<F.length;E++)O.indexOf(F[E])<0&&Object.prototype.propertyIsEnumerable.call(M,F[E])&&(B[F[E]]=M[F[E]]);return B},p=function(M,O){var B=typeof Symbol=="function"&&M[Symbol.iterator];if(!B)return M;var F=B.call(M),E,X=[],Y;try{for(;(O===void 0||O-- >0)&&!(E=F.next()).done;)X.push(E.value)}catch(G){Y={error:G}}finally{try{E&&!E.done&&(B=F.return)&&B.call(F)}finally{if(Y)throw Y.error}}return X},N=function(M,O){for(var B=0;B<M.length;B++)if(O<=M[B])return B},I=function(M,O){var B;return Array.isArray(M)?O===-1?M[0]:(B=M[O])!==null&&B!==void 0?B:M[M.length-1]:M},q=function(M,O){return(0,K.JY)(M)?I(M,O):M},e=function(M,O){var B=M.clientWidth,F=O.breakpoints,E=O.layout,X=O.labelAlign,Y=O.wrapperAlign,G=O.labelCol,ee=O.wrapperCol,ce=$(O,["breakpoints","layout","labelAlign","wrapperAlign","labelCol","wrapperCol"]),Q=N(F,B);return A({layout:q(E,Q),labelAlign:q(X,Q),wrapperAlign:q(Y,Q),labelCol:q(G,Q),wrapperCol:q(ee,Q)},ce)},he=function(M){var O=(0,R.useRef)(null),B=M.breakpoints;if(!(0,K.H1)(B))return{ref:O,props:M};var F=p((0,R.useState)(M),2),E=F[0],X=F[1],Y=function(){O.current&&X(e(O.current,M))};return(0,R.useEffect)(function(){var G=function(){Y()},ee=new ResizeObserver(G);return O.current&&ee.observe(O.current),Y(),function(){ee.disconnect()}},[]),{ref:O,props:E}},de=c(31194),se=c(58317),D=c.n(se),Ce=function(){return Ce=Object.assign||function(M){for(var O,B=1,F=arguments.length;B<F;B++){O=arguments[B];for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&(M[E]=O[E])}return M},Ce.apply(this,arguments)},xe=function(M,O){var B={};for(var F in M)Object.prototype.hasOwnProperty.call(M,F)&&O.indexOf(F)<0&&(B[F]=M[F]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,F=Object.getOwnPropertySymbols(M);E<F.length;E++)O.indexOf(F[E])<0&&Object.prototype.propertyIsEnumerable.call(M,F[E])&&(B[F[E]]=M[F[E]]);return B},Ze=(0,R.createContext)(null),we=(0,R.createContext)(null),te=function(){return(0,R.useContext)(Ze)},S=function(){return(0,R.useContext)(we)},Se=function(){return Ce(Ce({},te()),S())},je=function(M){var O,B=M.shallow,F=M.children,E=M.prefixCls,X=M.className,Y=M.style,G=xe(M,["shallow","children","prefixCls","className","style"]),ee=he(G),ce=ee.ref,Q=ee.props,fe=te(),ge=(0,de.F)("form",{prefixCls:E}),me=(0,de.F)("formily-layout",{prefixCls:E}),Ne=D()(me,(O={},O["".concat(ge,"-").concat(Q.layout)]=!0,O["".concat(ge,"-rtl")]=Q.direction==="rtl",O["".concat(ge,"-").concat(Q.size)]=Q.size,O),X),be=function(){var oe=Ce({},fe);return B?(Q.size&&(oe.size=Q.size),Q.colon&&(oe.colon=Q.colon)):Object.assign(oe,Q),R.createElement(Ze.Provider,{value:oe},R.createElement(we.Provider,{value:B?Q:void 0},F))};return R.createElement("div",{ref:ce,className:Ne,style:Y},be())};je.defaultProps={shallow:!0},je.useFormDeepLayout=te,je.useFormShallowLayout=S,je.useFormLayout=Se;var Re=null},58317:function(ve,ae){var c,R;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var K={}.hasOwnProperty;function A(){for(var $=[],p=0;p<arguments.length;p++){var N=arguments[p];if(!!N){var I=typeof N;if(I==="string"||I==="number")$.push(N);else if(Array.isArray(N)){if(N.length){var q=A.apply(null,N);q&&$.push(q)}}else if(I==="object")if(N.toString===Object.prototype.toString)for(var e in N)K.call(N,e)&&N[e]&&$.push(e);else $.push(N.toString())}}return $.join(" ")}ve.exports?(A.default=A,ve.exports=A):(c=[],R=function(){return A}.apply(ae,c),R!==void 0&&(ve.exports=R))})()},92801:function(){},76898:function(ve,ae,c){"use strict";c.d(ae,{Ff:function(){return O},rF:function(){return S},M2:function(){return te}});var R=c(22385),K=c(94199),A=c(11849),$=c(93224),p=c(54707),N=c(49914),I=c(9761),q=c(94184),e=c.n(q),he=c(94657),de=c(78338),se=c(67294),D=c(85893);function Ce(B){if(B=Number(B),B<=0)return"0:0:0";var F=Math.floor(B/3600),E=Math.floor(B%3600/60),X=Math.floor(B%3600%60),Y="".concat(F).padStart(2,"0"),G="".concat(E).padStart(2,"0"),ee="".concat(X).padStart(2,"0");return"".concat(Y,":").concat(G,":").concat(ee)}function xe(B){return B<=60?"#ff4d4f":B<=180?"#faad14":"#52c41a"}var Ze=(0,I.Pi)(function(){var B,F,E=(0,N.H)(),X=(0,p.Rk)(),Y=E.startTime,G=((B=E.project)===null||B===void 0||(F=B.setting.examSetting)===null||F===void 0?void 0:F.maxSubmitMinutes)||0,ee=(0,se.useState)(0),ce=(0,he.Z)(ee,2),Q=ce[0],fe=ce[1],ge=Y+G*60*1e3,me=(0,se.useRef)();return(0,se.useEffect)(function(){if(G!==0)return me.current=window.setInterval(function(){fe((ge-new Date().getTime())/1e3)},1e3),function(){clearInterval(me.current)}},[ge]),(0,se.useEffect)(function(){Q<0&&(X.submit(),clearInterval(me.current))},[Q]),G===0?(0,D.jsx)(D.Fragment,{}):(0,D.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,D.jsx)(de.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,D.jsx)("span",{style:{marginLeft:3,color:xe(Q)},children:Ce(Q)})]})}),we=["size","marked"],te=(0,I.Pi)(function(B){var F=(0,p.Rk)(),E=F.props.answerSheetVisible,X=B.size,Y=B.marked,G=Y===void 0?!0:Y,ee=(0,$.Z)(B,we);return E?(0,D.jsx)(K.Z,{title:"\u6807\u8BB0",children:(0,D.jsx)("svg",(0,A.Z)((0,A.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:B.size||24,height:B.size||24,className:"marked"},ee),{},{children:(0,D.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:G?"#EA4942":"#d8d8d8","p-id":"1287"})}))}):(0,D.jsx)(D.Fragment,{})}),S=(0,I.Pi)(function(B){var F,E,X,Y=B.id,G=B.name,ee=(0,p.Rk)(),ce=ee.answerSheet,Q=ce.find(function(be){return be.id===Y}),fe=(0,N.H)(),ge=fe==null||(F=fe.project)===null||F===void 0?void 0:F.isAuthenticated,me=(E=fe.project)===null||E===void 0||(X=E.setting.examSetting)===null||X===void 0?void 0:X.randomSurveyWrong,Ne=ee.exerciseMode;return(!Ne||!ge||Y.length<=10)&&!me?(0,D.jsx)(D.Fragment,{}):Q!=null&&Q.favorite?(0,D.jsx)(K.Z,{title:me?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,D.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){ee.favoriteQuestion({templateId:Y,name:G},!1)},children:(0,D.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,D.jsx)(K.Z,{title:me?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,D.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){ee.favoriteQuestion({templateId:Y,name:G})},children:(0,D.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),Se=(0,I.Pi)(function(B){var F=(0,p.Rk)(),E=B.finished,X=B.id,Y=B.marked,G=B.seqNo;return(0,D.jsxs)("div",{className:e()("answer-sheet-item",{marked:Y,finished:E}),onClick:function(){return F.changePageIndex(X)},children:[G,Y&&(0,D.jsx)(te,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),je=(0,I.Pi)(function(){var B=(0,p.Rk)(),F=B.answerSheet;return(0,D.jsx)(D.Fragment,{children:F.filter(function(E){return E.display!=="none"}).map(function(E,X){return(0,se.createElement)(Se,(0,A.Z)((0,A.Z)({},E),{},{seqNo:X+1,key:E.id}))})})}),Re=(0,I.Pi)(function(){var B=(0,p.Rk)(),F=B.answerSheet,E=F.filter(function(G){return G.finished}).length,X=F.filter(function(G){return!G.finished}).length,Y=F.filter(function(G){return G.marked}).length;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,D.jsx)("span",{style:{marginLeft:4},children:E})]}),(0,D.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,D.jsx)("span",{style:{marginLeft:4},children:X})]}),(0,D.jsxs)("div",{className:"marked",children:[(0,D.jsx)(te,{size:18}),"\u6807\u8BB0",(0,D.jsx)("span",{style:{marginLeft:4},children:Y})]})]})}),M=(0,I.Pi)(function(){return(0,D.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,D.jsx)(Ze,{})]})}),O=(0,I.Pi)(function(){var B=(0,p.Rk)(),F=B.props.answerSheetVisible;return F?(0,D.jsxs)("div",{className:"answer-sheet",children:[(0,D.jsx)(M,{}),(0,D.jsx)("div",{className:"answer-sheet-content",children:(0,D.jsx)(je,{})}),(0,D.jsx)("div",{className:"answer-sheet-footer",children:(0,D.jsx)(Re,{})})]}):(0,D.jsx)(D.Fragment,{})})},46033:function(ve,ae,c){"use strict";c.r(ae),c.d(ae,{default:function(){return Tt}});var R=c(94657),K=c(40807),A=c(78210),$=c(9761),p=c(67294),N=c(54707),I=c(48187),q=c(67635),e=c(85893),he=function(){var n=(0,N.AK)(),r=(0,p.useContext)(K.ZX),u=r.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(q.hl,{html:u.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(q.hl,{html:u.description})})]})},de=function(n){var r=(0,N.AK)();return(0,e.jsx)("div",{className:r+"-body",children:n.children})},se=c(77576),D=c(12028),Ce=c(57663),xe=c(71577),Ze=(0,$.Pi)(function(){var t,n,r=(0,N.AK)("-footer"),u=(0,p.useContext)(K.ZX),a=u.schema,g=u.loading,f=(0,N.Rk)(),s=f.pagination,o=s.current,x=s.pageSize,l=x>1,i=o===1,v=o===x;return(0,e.jsxs)("div",{className:r,children:[v&&(0,e.jsx)("div",{className:r+"-desc",style:{userSelect:"none"},children:(0,e.jsx)(q.hl,{html:a==null||(t=a.attribute)===null||t===void 0?void 0:t.suffix})}),(0,e.jsxs)("div",{className:r+"-pagination",children:[l&&!i&&(0,e.jsx)("div",{children:(0,e.jsx)(xe.Z,{type:"primary",block:!0,onClick:function(){return f.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),l&&!v&&(0,e.jsx)("div",{children:(0,e.jsx)(xe.Z,{type:"primary",block:!0,onClick:function(){return f.handleNext()},children:"\u4E0B\u4E00\u9875"})}),v&&(0,e.jsx)("div",{children:(0,e.jsx)(xe.Z,{type:"primary",block:!0,onClick:function(){return f.submit()},loading:g,children:(0,e.jsx)(q.hl,{html:((n=a.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),l&&(0,e.jsxs)("div",{className:r+"-pagination-info",children:["\u7B2C",o,"\u9875/\u5171",x,"\u9875"]}),f.autoNextPage>0&&(0,e.jsxs)("div",{style:{color:"#999",display:"flex",alignItems:"center",justifyContent:"center",width:200},children:["\u7B54\u5BF9\u81EA\u52A8\u8DF3\u8F6C\u4E0B\u4E00\u9875",(0,e.jsx)(D.Z,{style:{marginLeft:5},checked:f.autoNextPage===1,onChange:function(m){m?f.autoNextPage=1:f.autoNextPage=2}})]})]})]})}),we=c(47673),te=c(4107),S=c(11849),Se=c(77883),je=c(85986),Re=c(14965),M=c(68318),O=c(39002),B=c(68351),F=c(43358),E=c(66074),X=c(29985),Y=c(46842),G=c(64302),ee=c(27484),ce=c.n(ee),Q=c(33852);ce().locale("zh-cn");function fe(t,n){if(!!t)return ce()(t,n)}var ge=function(n){var r=n.dictCode,u=n.value,a=n.onChange,g=n.style,f=n.bordered,s=n.className,o=n.parentValue,x=n.cascaderLevel,l=x===void 0?1:x,i=(0,N.Al)(),v=(0,p.useState)([]),d=(0,R.Z)(v,2),m=d[0],h=d[1],C=(0,N.zE)(function(j){l&&l>1&&!o||i.onDictSearch&&i.onDictSearch({dictCode:r,searchValue:j,parentValue:o==null?void 0:o.split("|")[0],cascaderLevel:l}).then(function(y){h(y||[])})},2);return(0,p.useEffect)(function(){l&&l>1&&(o?C(void 0):h([]))},[o,l]),(0,p.useEffect)(function(){!u&&l<=1&&r&&C(void 0),u&&m.length===0&&C(u)},[u]),(0,e.jsx)(E.Z,{options:m,showSearch:!0,onSearch:C,value:u==null?void 0:u.split("|")[0],onChange:function(y){var b;return a("".concat(y,"|").concat((b=m.find(function(Z){return Z.value===y}))===null||b===void 0?void 0:b.label))},style:g,bordered:f,dropdownClassName:s,allowClear:!0})};function me(t,n){return n||(t==="date"?"YYYY-MM-DD":t==="dateTime"?"YYYY-MM-DD HH:mm:ss":t==="time"?"HH:mm:ss":"YYYY-MM-DD")}function Ne(t){return t?t==="YYYY"?"year":t==="YYYY-MM"?"month":"date":"date"}var be=function(n){var r=n.onChange,u=n.type,a=n.value,g=n.style,f=g===void 0?{width:"100%"}:g,s=n.className,o=n.readOnly,x=n.bordered,l=me(u,n.dateTimeFormat);return l.startsWith("HH")?(0,e.jsx)(B.Z,{value:fe(a,l),format:l,onChange:function(v,d){return r(d)},style:f,className:s,disabled:o,bordered:x}):(0,e.jsx)(M.Z,{onChange:function(v,d){r(d)},disabled:o,format:l,picker:Ne(l),showTime:l.includes("HH")||l.includes("mm")||l.includes("ss"),showSecond:l.includes("ss"),showMinute:l.includes("mm"),showHour:l.includes("HH"),value:fe(a,l),style:f,className:s,bordered:x})},oe=function(n){var r=n.onChange,u=n.type,a=n.value,g=n.suffix,f=n.style,s=f===void 0?{width:"100%"}:f,o=n.className,x=n.dictCode,l=n.onBlur,i=l===void 0?function(){}:l,v=n.bordered,d=n.parentValue,m=n.cascaderLevel,h=n.icon,C=h===void 0?!0:h,j=n.readOnly,y=j===void 0?!1:j,b=n.schema;return u==="horzBlank"?(0,e.jsx)(e.Fragment,{}):u==="selectDict"&&x?(0,e.jsx)(ge,{value:a,onChange:r,dictCode:x,style:s,bordered:v,className:o,parentValue:d,cascaderLevel:m}):u==="select"&&b!==null&&b!==void 0&&b.dataSource?(0,e.jsx)(E.Z,{options:b.dataSource,style:{width:200},bordered:v,onChange:r}):u==="number"?(0,e.jsx)(je.Z,{className:o,onChange:r,onBlur:function(w){return i(w.target.value)},value:a,style:s,addonAfter:g,readOnly:y,bordered:v}):u==="date"||u==="dateTime"||u==="time"?(0,e.jsx)(be,(0,S.Z)({},n)):u==="mobile"?(0,e.jsx)(te.Z,{prefix:C?(0,e.jsx)(X.Z,{}):void 0,onChange:function(w){return r(w.target.value)},value:a,className:o,onBlur:function(w){return i(w.target.value)},bordered:v,readOnly:y}):u==="idCard"?(0,e.jsx)(te.Z,{prefix:C?(0,e.jsx)(Y.Z,{}):void 0,onChange:function(w){return r(w.target.value)},value:a,style:s,className:o,onBlur:function(w){return i(w.target.value)},bordered:v}):u==="email"?(0,e.jsx)(te.Z,{prefix:C?(0,e.jsx)(G.Z,{}):void 0,onChange:function(w){return r(w.target.value)},onBlur:function(w){return i(w.target.value)},value:a,style:s,className:o,bordered:v}):u==="password"?(0,e.jsx)(te.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onChange:function(w){return r(w.target.value)},onBlur:function(w){return i(w.target.value)},value:a,suffix:g,style:s,className:o,bordered:v,readOnly:y}):(0,e.jsx)(te.Z,{onChange:function(w){return r(w.target.value)},onBlur:function(w){return i(w.target.value)},value:a,suffix:g,style:s,className:o,bordered:v,readOnly:y})},$t=c(49111),De=c(19650),sn=c(17672),on=function(n){var r=n.onChange,u=(0,p.useRef)(null),a=(0,p.useRef)(),g=(0,p.useRef)(),f=(0,p.useState)(0),s=(0,R.Z)(f,2),o=s[0],x=s[1];return(0,p.useEffect)(function(){var l=u.current;if(l){var i,v=new sn.Z(u.current);v.addEventListener("beginStroke",function(){x(1)}),a.current=v;var d=Math.max(window.devicePixelRatio||1,1);l.width=l.offsetWidth*d,l.height=l.offsetHeight*d,(i=l.getContext("2d"))===null||i===void 0||i.scale(d,d)}},[]),(0,e.jsxs)("div",{className:"signature-pad",children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:g.current?"hidden":"visible"},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsxs)("div",{className:"signature",children:[(0,e.jsx)("canvas",{ref:u,style:{width:"100%",height:"100%",touchAction:"none",userSelect:"none",display:o!==2?"block":"none"}}),o===2&&(0,e.jsx)("img",{src:g.current||void 0})]}),(0,e.jsxs)("div",{className:"save-signature",children:[(0,e.jsx)("span",{children:"\u7B7E\u540D\u5B8C\u6210\u540E\uFF0C\u8BF7\u70B9\u51FB\u3010\u5B8C\u6210\u3011\u6309\u94AE"}),(0,e.jsx)("div",{children:(0,e.jsxs)(De.Z,{children:[o===1&&(0,e.jsx)(xe.Z,{type:"link",onClick:function(){var i;(i=a.current)===null||i===void 0||i.clear(),x(0)},children:"\u6E05\u7A7A"}),(o===0||o===1)&&(0,e.jsx)(xe.Z,{type:"primary",disabled:o!==1,ghost:!0,size:"small",onClick:function(){var i;r(a.current.toDataURL()),g.current=(i=a.current)===null||i===void 0?void 0:i.toDataURL(),x(2)},children:"\u5B8C\u6210"}),o===2&&(0,e.jsx)(xe.Z,{type:"primary",ghost:!0,size:"small",onClick:function(){var i;x(0),(i=a.current)===null||i===void 0||i.clear()},children:"\u91CD\u7B7E"})]})})]})]})},un=c(3024),dn=(0,$.Pi)(function(){var t=(0,p.useContext)(K.ZX),n=t.progressBar,r=(0,N.AK)(),u=(0,N.Rk)(),a=u.progress;return n?(0,e.jsx)(un.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:r+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(a*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})}),Ue=function(n){var r,u=n.optionId,a=n.questionId,g=n.checked,f=n.checkedCount,s=n.quota,o=n.statEnabled,x=(0,N.Al)(),l=x.statistics,i=l==null?void 0:l.questionStatistics[a],v=((i==null?void 0:i.optionStatistics.reduce(function(C,j){return C+j.count},0))||0)+f,d=(i==null||(r=i.optionStatistics.find(function(C){return C.optionId===u}))===null||r===void 0?void 0:r.count)||0,m=g?d+1:d,h="".concat(Math.floor(m/v*1e3)/10,"%");return!o&&s===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[s&&(0,e.jsxs)("span",{className:"vote-info-cnt",style:{color:s-d>0?"#1890ff":"#949aae"},children:["(\u4F59",s-d,")"]}),o&&f>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:"vote-info-cnt",children:[m,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:h}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:h}})})]})]})},Te=function(n){var r=n.schema,u=n.type,a=r.attribute,g=a===void 0?{}:a,f=g.examCorrectAnswer,s=(0,N.Al)(),o=s.correctAnswerVisible,x=s.mode;return f&&o&&x==="exam"?u==="FillBlank"||u==="HorzBlank"||u==="MultipleBlank"?(0,e.jsx)("span",{className:"correct-answer",children:f}):(0,e.jsx)("span",{className:"correct-answer",children:"\uFF08\u6B63\u786E\u7B54\u6848\uFF09"}):(0,e.jsx)(e.Fragment,{})},Lt=function(n){var r=n.schema,u=r.attribute,a=u===void 0?{}:u,g=a.examScore,f=useSurvey(),s=f.mode,o=f.examScoreVisible;return g&&s==="exam"&&o?_jsxs("span",{className:"question-score",children:["\uFF08",g,"\u5206\uFF09"]}):_jsx(_Fragment,{})},cn=(0,$.Pi)(function(t){var n=(0,N.Rk)(),r=n.reviewAnswer[t.qId];return r&&!r.visible?(0,e.jsx)("span",{className:"review-answer-btn",onClick:function(){r.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),kt=c(63185),Pe=c(9676),vn=c(36862),hn=c(46533),fn=c(94184),Be=c.n(fn),mn=c(91220),We=c(15020);function Ve(t,n,r,u){if(!t)return"";var a=RegExp("_{3,}","g"),g=t.matchAll(a),f=[],s=(0,mn.Z)(g),o;try{for(s.s();!(o=s.n()).done;){var x=o.value,l=x.index,i=x.index+x[0].length;f.push([l,i])}}catch(h){s.e(h)}finally{s.f()}if(f.length===0)return t;for(var v=f[0][0]===0?"":t.substring(0,f[0][0]),d=function(C){var j,y,b=f[C],Z=f[C+1],w=t.substring(b[0],b[1]),P=t.substring(b[1],Z?Z[0]:t.length),L=n[C],T=r?r[L.id]:"";if(((j=L.attribute)===null||j===void 0?void 0:j.dataType)==="select"){var z,H;T=(z=L.dataSource)===null||z===void 0||(H=z.find(function(V){return V.value===T}))===null||H===void 0?void 0:H.label}else if(((y=L.attribute)===null||y===void 0?void 0:y.dataType)==="selectDict"){var k,U;T=(k=T)===null||k===void 0||(U=k.split("|"))===null||U===void 0?void 0:U[1]}v+='<input data-id="'.concat(n[C].id,`" value='`).concat(T||"",`'  class="horz-blank" style="width:`).concat(12*w.length,'px">'),v+=P},m=0;m<f.length;m++)d(m);return v}var Ae=(0,$.Pi)(function(t){var n=t.content,r=t.children,u=t.value,a=u===void 0?{}:u,g=t.onChange,f=t.onBlur,s=t.schema,o=(0,N.Rk)(),x=o.reviewAnswer[s.id];function l(i,v){var d,m;if(a[i]!==v){a[i]=v;var h=r.find(function(b){return b.id===i}),C=h==null||(d=h.attribute)===null||d===void 0?void 0:d.cascaderLevel,j=h==null||(m=h.attribute)===null||m===void 0?void 0:m.dictCode;j&&C&&r.filter(function(b){var Z;return((Z=b.attribute)===null||Z===void 0?void 0:Z.dictCode)===j&&b.attribute.cascaderLevel&&b.attribute.cascaderLevel>C}).forEach(function(b){delete a[b.id]}),(v===""||v===void 0)&&delete a[i];var y=(0,S.Z)({},a);if(Object.keys(y).length!==0)return y}}return(0,e.jsx)("div",{className:"pe-view",onClick:function(v){v.preventDefault(),v.stopPropagation()},children:(0,We.ZP)(Ve(n,r),{replace:function(v){var d=v.attribs;if(!!d){var m=d["data-id"];if(m){var h,C,j,y,b,Z=(0,We.e_)(d),w=r.findIndex(function(_){return _.id===m}),P=r[w],L=(h=r[w-1])===null||h===void 0?void 0:h.id,T=a[L],z=(P==null||(C=P.attribute)===null||C===void 0?void 0:C.dataType)||"text",H=P==null||(j=P.attribute)===null||j===void 0?void 0:j.dictCode,k=P==null||(y=P.attribute)===null||y===void 0?void 0:y.dateTimeFormat,U=(b=P.attribute)===null||b===void 0?void 0:b.cascaderLevel,V=x==null?void 0:x[m].isCorrect,W=Be()(Z.className,{selected:x&&x.visible,"is-correct":x&&x.visible&&V});return(0,e.jsx)(oe,(0,S.Z)((0,S.Z)({type:z,value:a[m],parentValue:T,schema:P,cascaderLevel:U,onChange:function(J){return g(l(m,J))},onBlur:function(J){return f(l(m,J))},dictCode:H,dateTimeFormat:k,bordered:!1,icon:!1},Z),{},{className:W}))}}}})})}),xn=(0,$.Pi)(function(t){var n=t.qId,r=t.schema,u=t.checked,a=t.onChange,g=t.value,f=t.onBlur,s=t.disabled,o=r.id,x=r.title,l=r.attribute,i=l===void 0?{}:l,v=(0,N.Rk)(),d=v.reviewAnswer[n],m=d==null?void 0:d[o].selected,h=d==null?void 0:d[o].isCorrect,C=i.dataType;return d&&d.visible&&(m||h)?(0,e.jsxs)("label",{className:Be()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item",{selected:m,"is-correct":h}),onClick:function(){return a(!u)},children:[(0,e.jsxs)("span",{children:[!h&&(0,e.jsx)(vn.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),h&&(0,e.jsx)(hn.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(A.Z,{html:x})})]}):(0,e.jsxs)(Pe.Z,{value:o,checked:u,onChange:function(y){return a(y.target.checked)},disabled:s,children:[C==="horzBlank"&&r.children?(0,e.jsx)(Ae,{content:x,children:r.children,value:g,schema:r,onBlur:f,onChange:function(y){return a(!0,y)}}):(0,e.jsx)(A.Z,{html:x}),(0,e.jsx)(Te,{schema:t.schema})]})}),zt=c(88983),Fe=c(66253),Ke=c(43061),Ye=c(38819),gn=c(91508),jn=(0,$.Pi)(function(t){var n=t.qId,r=t.schema,u=t.onBlur,a=t.onChange,g=t.value,f=t.disabled,s=r.id,o=r.title,x=r.attribute,l=(0,N.Rk)(),i=l.reviewAnswer[n],v=i==null?void 0:i[s].selected,d=i==null?void 0:i[s].isCorrect,m=p.useContext(gn.ZP),h=x==null?void 0:x.dataType;return i&&i.visible&&(v||d)?(0,e.jsxs)("label",{className:Be()("ant-radio-wrapper ant-radio-wrapper-in-form-item radio-item",{selected:v,"is-correct":d}),onClick:function(){var j;f||m==null||(j=m.onChange)===null||j===void 0||j.call(m,{target:{value:s}})},children:[(0,e.jsxs)("span",{children:[!d&&(0,e.jsx)(Ke.Z,{style:{color:"#ff6d56",marginRight:10}}),d&&(0,e.jsx)(Ye.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(A.Z,{html:o})})]}):(0,e.jsxs)(Fe.ZP,{value:s,className:"radio-item",disabled:f,children:[h==="horzBlank"&&r.children?(0,e.jsx)(Ae,{schema:r,content:o,children:r.children,value:typeof g=="boolean"?{}:g,onBlur:u,onChange:a}):(0,e.jsx)(A.Z,{html:o}),(0,e.jsx)(Te,{schema:t.schema})]})}),Cn=(0,$.Pi)(function(t){var n=t.schema,r=t.value,u=t.onChange,a=t.qId,g=t.onBlur,f=(0,N.AK)("-body-question"),s=n.id,o=n.attribute,x=o==null?void 0:o.suffix,l=o==null?void 0:o.dataType,i=o==null?void 0:o.dictCode,v=o==null?void 0:o.dateTimeFormat,d=o==null?void 0:o.readOnly,m=(0,N.Rk)(),h=m.reviewAnswer[a],C=h==null?void 0:h[s].isCorrect;return h&&h.visible?(0,e.jsxs)("span",{style:{position:"relative"},children:[!C&&(0,e.jsx)(Ke.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),C&&(0,e.jsx)(Ye.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:0,top:3,zIndex:1}}),(0,e.jsx)(oe,{type:l,value:r[s],readOnly:d,className:Be()("selected",{"is-correct":C}),onChange:function(y){return u(y)},onBlur:g,style:{paddingLeft:20},suffix:x&&(0,e.jsx)("span",{className:f+"-option-suffix",children:(0,e.jsx)(A.Z,{html:x})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(oe,{type:l,value:r[s],onChange:function(y){return u(y)},onBlur:g,readOnly:d,dictCode:i,dateTimeFormat:v,suffix:x&&(0,e.jsx)("span",{className:f+"-option-suffix",children:(0,e.jsx)(A.Z,{html:x})})})})}),Ht=c(65011),Ut=c(48736),Wt=c(402),yn=c(20294),pn=E.Z.Option,Me=yn.Z.Text,Vt=function(n){var r=n.onChange,u=n.form,a=n.record,g=useState(n.value),f=_slicedToArray(g,2),s=f[0],o=f[1],x=useState(n.value),l=_slicedToArray(x,2),i=l[0],v=l[1];useEffect(function(){v(n.value)},[n.value]);var d=useState([{id:"1",drugName:"\u6D4B\u8BD5\u7528\u836F",chemicalName:"hahah11",stCompName:"\u4E0A\u6D77\u5236\u836F\u5382"},{id:"2",drugName:"\u6D4B\u8BD5\u7528\u836F1",chemicalName:"hahah11",stCompName:"\u5E7F\u4E1C\u5236\u836F\u5382"}]),m=_slicedToArray(d,2),h=m[0],C=m[1],j=useThrottleCallback(function(y){},4);return _jsx(_AutoComplete,{showSearch:!0,placeholder:"\u70B9\u51FB\u641C\u7D22",value:i,dropdownMatchSelectWidth:!1,onBlur:function(){v(s),s?r==null||r(s):r==null||r(void 0)},onSelect:function(b){o(b),v(b)},allowClear:!0,onClear:function(){o(void 0),v(void 0),r==null||r(void 0)},onSearch:function(b){v(b),j(b)},dropdownRender:function(b){return _jsxs(_Fragment,{children:[b,_jsx(_Divider,{style:{margin:"8px 0"}}),_jsxs(_Space,{align:"center",style:{padding:"0 8px 4px"},children:[_jsx(Me,{children:"\u836F\u7269\u540D\u79F0"}),_jsx(Me,{type:"secondary",style:{fontSize:12},children:"(\u5546\u54C1\u540D-\u5382\u5BB6)"})]})]})},children:h.map(function(y){return _jsxs(pn,{value:y.drugName,children:[_jsxs(Me,{children:[" ",y.drugName]}),_jsxs(Me,{type:"secondary",style:{fontSize:12,marginLeft:5},children:["(",y.chemicalName,"-",y.stCompName,")"]})]},y.id)})})},bn=(0,$.Pi)(function(t){var n,r=t.schema,u=t.title,a=t.onBlur,g=t.onChange,f=r.type,s=((n=r.children)===null||n===void 0?void 0:n.filter(function(l){var i;return(i=l.attribute)===null||i===void 0?void 0:i.fieldInTitle}))||[],o=(0,$.U$)(),x=o.value;return f!=="HorzBlank"||s.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(A.Z,{html:u})}):(0,e.jsx)(Ae,{schema:r,children:s,content:u,onChange:g,onBlur:a,value:x})}),Zn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),wn=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),Bn=(0,$.Pi)(function(t){var n,r=t.schema,u=t.seqNo,a=(0,N.Rk)(),g=a.props.correctAnswerVisible,f=a.props.questionScore,s=(n=r.attribute)===null||n===void 0?void 0:n.examAnswerMode;return!g||!f||s==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[(0,e.jsxs)("span",{children:["\u7B2C",u,"\u9898"]}),f[r.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",f[r.id],"\u5206"]}),wn]}):Zn]})}),Kt=c(71194),Sn=c(50146);function Ge(t){return t?t.substring(0,t.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var Nn=function(n){var r=n.onChange,u=n.value,a=n.mapMove,g=a===void 0?!1:a,f=n.optionId,s=(0,p.useRef)(null),o=(0,p.useRef)(),x=(0,p.useRef)(),l=(0,p.useRef)(),i=(0,p.useState)(function(){if(!!u){var T=u.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(T&&T.length>2)return[parseFloat(T[1]),parseFloat(T[2])]}}),v=(0,R.Z)(i,2),d=v[0],m=v[1],h=(0,p.useState)(function(){return Ge(u)}),C=(0,R.Z)(h,2),j=C[0],y=C[1],b=(0,p.useState)(!1),Z=(0,R.Z)(b,2),w=Z[0],P=Z[1],L=(0,p.useCallback)(function(T){x.current.getLocation(T,function(z,H){if(z==="complete"&&H.geocodes.length){var k=H.geocodes[0].location;l.current.start(k)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,p.useEffect)(function(){if(!!w){window["localMap".concat(f)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(U){var V=new AMap.Map("map-".concat(f),{zoom:16,center:d,dragEnable:g,zoomEnable:g});if(o.current=V,g){var W=new U({mode:"dragMarker",map:V});W.on("success",function(ne){y(ne.address),m([ne.position.lng,ne.position.lat])}),d?W.start(d):W.start(),V.panBy(0,1),l.current=W}var _=new AMap.Geocoder({city:"010"});x.current=_;var J=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});J.getCurrentPosition(function(ne,ie){ne=="complete"?(V.setCenter(ie.position),y(ie.formattedAddress),m([ie.position.lng,ie.position.lat])):console.error(ie)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var T="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(f,"&plugin=AMap.Geocoder,AMap.Geolocation"),z=document.createElement("script");z.src=T,document.head.appendChild(z);var H="https://webapi.amap.com/ui/1.1/main-async.js",k=document.createElement("script");k.src=H,document.head.appendChild(k)}},[w]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(te.Z.TextArea,{readOnly:!0,value:Ge(u),onClick:function(){return P(!0)}}),(0,e.jsxs)(Sn.Z,{open:w,onCancel:function(){P(!1)},onOk:function(){d&&r("".concat(j,"[").concat(d[0],", ").concat(d[1],"]")),P(!1)},children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:g&&(0,e.jsx)(te.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(z){return L(z)}})}),(0,e.jsx)("div",{ref:s,id:"map-".concat(f),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:j})]})]})},En=(0,$.Pi)(function(t){var n,r,u=t.qId,a=t.schema,g=(0,N.Rk)(),f=g.reviewAnswer[u],s=(n=a.children)===null||n===void 0?void 0:n.map(function(i){var v;return(v=i.attribute)===null||v===void 0?void 0:v.examCorrectAnswer}).filter(function(i){return i}).join(";"),o=s&&["FillBlank","MultipleBlank","Textarea","HorzBlank"].includes(a.type),x=function(){return o?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:s})]}):(0,e.jsx)(e.Fragment,{})},l=function(){var v;if((v=a.attribute)!==null&&v!==void 0&&v.examAnalysis){var d;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(A.Z,{html:(d=a.attribute)===null||d===void 0?void 0:d.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return f&&f.visible&&((r=a.attribute)!==null&&r!==void 0&&r.examAnalysis||o)?(0,e.jsxs)("div",{className:"answer-analysis",children:[x(),l()]}):(0,e.jsx)(e.Fragment,{})}),$e=c(76898);function Pn(t){var n=t.schema,r=t.index,u=t.required,a=t.error,g=t.replaceTitle,f=t.seqNo,s=t.onBlur,o=t.onChange,x=t.onFocus,l=(0,p.useContext)(K.ZX),i=l.questionNumber,v=l.requiredVisible,d=(0,N.AK)("-body-question"),m=(0,p.useState)(),h=(0,R.Z)(m,2),C=h[0],j=h[1],y=n.description,b=(0,N.Rk)(),Z=b.answerSheet.find(function(L){return L.id===n.id}),w=Z==null?void 0:Z.marked;(0,p.useEffect)(function(){if(C){var L,T;(L=document.querySelector("[data-id='".concat(n.id,"']")))===null||L===void 0||L.classList.remove("ant-form-item-has-error"),(T=document.querySelector("[data-id='".concat(n.id,"']")))===null||T===void 0||T.querySelectorAll("[data-id]").forEach(function(_){_.classList.remove("ant-form-item-has-error")})}if(a.length>0){var z,H=a[0].split("^"),k=(0,R.Z)(H,2),U=k[0],V=k[1],W;V?(W=document.querySelector("[data-id='".concat(U,"']")),j(V)):(W=document.querySelector("[data-id='".concat(n.id,"']")),j(U)),(z=W)===null||z===void 0||z.classList.add("ant-form-item-has-error")}else C&&j(void 0)},[a]);var P=function(){return C?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:C})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("section",{className:d,children:[(0,e.jsx)("div",{className:"".concat(d,"-head"),children:(0,e.jsxs)("span",{className:d+"-header",children:[(0,e.jsx)(Bn,{schema:n,seqNo:r+1}),(0,e.jsxs)("h2",{className:d+"-header-title",children:[i&&(0,e.jsx)("span",{className:d+"-header-title-seq",children:(0,e.jsx)("b",{children:i?f:""})}),u&&v&&(0,e.jsx)("span",{className:d+"-header-title-required",children:(0,e.jsx)("i",{children:"*"})}),(0,e.jsx)("div",{className:d+"-header-title-text",children:(0,e.jsx)(bn,{schema:n,title:g||n.title,onBlur:s,onChange:o,onFocus:x})}),P(),(0,e.jsx)($e.M2,{marked:w,onClick:function(){b.markQuestion(n.id,!w)}}),(0,e.jsx)($e.rF,{id:n.id,name:n.title})]}),y&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(A.Z,{html:y})})]})}),(0,e.jsxs)("div",{className:"".concat(d,"-body"),children:[t.children,(0,e.jsx)(cn,{qId:n.id}),(0,e.jsx)(En,{qId:n.id,schema:n})]})]})}(0,I.eC)("Question",(0,$.Pi)(Pn),"antd");function An(t){var n=t.schema,r=t.index,u=t.seqNo,a=(0,N.AK)("-body-questionSet"),g=(0,p.useContext)(K.ZX),f=g.questionNumber;return(0,e.jsxs)("div",{className:a,children:[(0,e.jsxs)("div",{className:a+"-title",children:[f&&(0,e.jsx)("span",{className:a+"-title-seq",children:(0,e.jsx)("b",{children:f?u:""})}),(0,e.jsx)(A.Z,{html:n.title})]}),t.children,(0,e.jsx)("div",{className:a+"-splitLine"})]})}(0,I.eC)("QuestionSet",An,"antd");var Yt=c(84305),Fn=c(88182),Mn=c(82925);ce().locale("zh-cn");function In(t){var n=t.headerVisible,r=t.footerVisible,u=t.schema,a=(0,N.AK)(),g=(0,N.Al)(),f=function(){var o,x=(o=u.attribute)===null||o===void 0?void 0:o.headerImage;if(x)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(x),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Be()(a,{preview:g.isPreview}),children:[(0,e.jsx)(dn,{}),(0,e.jsx)("div",{className:a+"-banner",children:f()}),n&&(0,e.jsx)(he,{}),(0,e.jsx)(Fn.ZP,{locale:Mn.Z,children:(0,e.jsx)(de,{children:t.children})}),r&&(0,e.jsx)(Ze,{}),(0,e.jsx)($e.Ff,{})]})}(0,I.eC)("Survey",In,"antd");var Gt=c(13062),ue=c(71230),Qt=c(89032),le=c(15746),re=c(32059);function On(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children;function f(s,o){r((0,re.Z)({},o,s))}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(s){var o=s.id,x=s.title,l=s.attribute,i=l===void 0?{}:l,v=i.mapMove;return(0,e.jsxs)(ue.Z,{gutter:[10,0],"data-id":o,children:[x&&(0,e.jsx)(le.Z,{span:24},s.id),(0,e.jsx)(le.Z,{span:24,children:(0,e.jsx)(Nn,{optionId:o,onChange:function(m){return f(m,o)},value:a[o],mapMove:v})})]},o)})})}(0,I.RM)("Address",On,"antd");var Xt=c(43185),Ie=c(32620),Jt=c(34792),Qe=c(48086),Oe=c(39428),Xe=c(3182),Rn=c(81473);function Dn(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=t.readOnly,f=n.children,s=f===void 0?[]:f,o=(0,N.Al)(),x=function(){var l=(0,Xe.Z)((0,Oe.Z)().mark(function i(v){var d,m,h,C;return(0,Oe.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:d=v.onSuccess,m=v.onError,h=v.file,C=v.onProgress,o.onUpload&&o.onUpload({file:h,fileType:6},function(b){C&&C({percent:b.loaded/b.total*100})}).then(function(b){if(b.success&&d&&(d(b.data),b.data.content&&r((0,re.Z)({},s[0].id,b.data.content))),!b.success&&m){var Z=new Error("Some error");m({event:Z})}});case 2:case"end":return y.stop()}},i)}));return function(v){return l.apply(this,arguments)}}();return(0,e.jsx)("div",{children:s==null?void 0:s.map(function(l){var i=l.id,v=l.attribute,d=v===void 0?{}:v,m=d.cameraOnly;return(0,e.jsx)(ue.Z,{style:{marginBottom:10},"data-id":i,children:(0,e.jsx)(le.Z,{span:12,children:(0,e.jsx)(te.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:a[i],addonAfter:(0,e.jsx)(Ie.Z,{accept:"image/*",capture:m?"environment":void 0,disabled:g,maxCount:1,beforeUpload:function(C){return d!=null&&d.maxFileSize&&C.size>d.maxFileSize*1024*1024?(Qe.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(d.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Ie.Z.LIST_IGNORE):!0},customRequest:x,showUploadList:!1,children:(0,e.jsx)(Rn.Z,{})},i)})})},i)})})}(0,I.RM)("Barcode",Dn,"antd");var qt=c(36877),Tn=c(95897);function $n(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g;function s(o){var x={};o.forEach(function(l,i){var v=f[i].id;x[v]=l}),r(x)}return(0,e.jsx)(ue.Z,{children:(0,e.jsx)(le.Z,{span:12,children:(0,e.jsx)(Tn.Z,{value:f.map(function(o){return a[o.id]}).filter(function(o){return o}),style:{width:260},options:n.dataSource,onChange:s,placeholder:"\u8BF7\u9009\u62E9"})})})}(0,I.RM)("Cascader",$n,"antd");function Ln(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=t.onBlur,f=n.children,s=n.attribute,o=24/((s==null?void 0:s.columns)||1),x=(0,N.AK)("-body-question"),l=!!(s!=null&&s.statEnabled),i=(0,N.Al)(),v=(0,N.Rk)(),d=v.hiddenOption[n.id]||[];(0,p.useEffect)(function(){var h=Object.keys(a),C=!1;h.forEach(function(j){d.includes(j)&&(C=!0,delete a[j])}),C&&r((0,S.Z)({},a))},[d]);function m(h,C,j){return C?a[h]=j||!0:delete a[h],(0,S.Z)({},a)}return(0,p.useEffect)(function(){f==null||f.forEach(function(h){var C;(C=h.attribute)!==null&&C!==void 0&&C.defaultChecked&&Object.keys(a).length===0&&r((0,re.Z)({},h.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(ue.Z,{children:f==null?void 0:f.filter(function(h){return!d.includes(h.id)}).map(function(h){var C,j,y,b,Z=h.id,w=(C=h.attribute)===null||C===void 0?void 0:C.dataType,P=(j=h.attribute)===null||j===void 0?void 0:j.suffix,L=(y=h.attribute)===null||y===void 0?void 0:y.readOnly,T=(b=h.attribute)===null||b===void 0?void 0:b.quota,z=!1;if(T!==void 0){var H,k=i.statistics,U=k==null?void 0:k.questionStatistics[n.id],V=(U==null||(H=U.optionStatistics.find(function(_){return _.optionId===Z}))===null||H===void 0?void 0:H.count)||0,W=T-V;W<=0&&(z=!0)}return(0,e.jsxs)(le.Z,{span:o,className:x+"-option","data-id":Z,children:[(0,e.jsx)(xn,{disabled:z,qId:n.id,schema:h,checked:a.hasOwnProperty(Z),onChange:function(J,ne){z||r(m(Z,J,ne))},value:typeof a[Z]=="boolean"?{}:a[Z],onBlur:g}),(0,e.jsx)(Ue,{statEnabled:l,quota:T,checked:!!a[Z],optionId:Z,questionId:n.id,checkedCount:Object.keys(a).length}),w&&(0,e.jsx)(oe,{value:typeof a[Z]=="boolean"?"":a[Z],style:{maxWidth:200},type:w,onChange:function(J){return r(m(Z,!0,J))},onBlur:function(J){return g(m(Z,!0,J))},readOnly:L,suffix:P&&(0,e.jsx)("span",{className:x+"-option-suffix",children:(0,e.jsx)(A.Z,{html:P})})})]},Z)})})})}(0,I.RM)("Checkbox",(0,$.Pi)(Ln),"antd");var _t=c(71153),Je=c(60331),ea=c(62999),kn=c(95222),ye=c(3980),zn=c(60780),Hn=c.n(zn);function Un(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g,s=f[0].id,o=(0,p.useState)([]),x=(0,R.Z)(o,2),l=x[0],i=x[1];function v(m){s&&((m==null?void 0:m.length)===0?r(void 0):r((0,re.Z)({},s,m==null?void 0:m.map(function(h){return h.value}))))}var d=(0,p.useMemo)(function(){return Hn()(l.map(function(m){return{title:m.name,key:m.id,value:m.id,parentId:m.parentId}}),{parentProperty:"parentId",customID:"key"})},[l]);return(0,p.useEffect)(function(){ye.hi.selectDept({}).then(function(m){m.success&&i(m.data)})},[]),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(le.Z,{span:24,children:(0,e.jsx)(kn.Z,{style:{width:"100%"},treeCheckable:!0,value:(a[s]||[]).map(function(m){return{value:m}}),treeCheckStrictly:!0,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:d,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:v,showSearch:!1})})})}var Wn=function(n){var r=n.schema,u=n.value,a=u===void 0?{}:u,g=r.children,f=g===void 0?[]:g,s=f[0].id,o=(0,p.useState)([]),x=(0,R.Z)(o,2),l=x[0],i=x[1];return(0,p.useEffect)(function(){ye.hi.selectDept({selected:a[s]||[],name:"^_^"}).then(function(v){v.success&&i(v.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(De.Z,{children:l.map(function(v){return(0,e.jsx)(Je.Z,{color:"blue",children:v.name},v.id)})})})};(0,I.RM)("Dept",Un,"antd"),(0,I.cf)("Dept",Wn,"antd");function qe(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=t.onBlur,f=n.children,s=(0,N.AK)("-body-question");function o(l,i){a[l]=i,i===""&&delete a[l],r((0,S.Z)({},a),l)}function x(l,i){a[l]=i,i===""&&delete a[l],g((0,S.Z)({},a),l)}return(0,e.jsx)("div",{children:f==null?void 0:f.map(function(l){var i=l.id,v=l.title;return(0,e.jsxs)(ue.Z,{style:{marginBottom:10},"data-id":i,children:[v&&(0,e.jsx)(le.Z,{className:s+"-option",span:4,children:l.title&&(0,e.jsx)("span",{className:s+"-option-title",children:(0,e.jsx)(A.Z,{html:l.title})})},l.id),(0,e.jsxs)(le.Z,{span:12,className:s+"-option",children:[(0,e.jsx)(Cn,{qId:n.id,schema:l,value:a,onChange:function(m){return o(i,m)},onBlur:function(m){return x(i,m)}}),(0,e.jsx)(Te,{schema:l,type:n.type})]})]},i)})})}(0,I.RM)("FillBlank",qe,"antd"),(0,I.RM)("MultipleBlank",qe,"antd");function Vn(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=t.onBlur,f=n.children,s=n.attribute,o=s===void 0?{}:s,x=o.content;return!x||!f?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(Ae,{schema:n,children:f.filter(function(l){var i;return!((i=l.attribute)!==null&&i!==void 0&&i.fieldInTitle)}),content:x,onBlur:g,onChange:r,value:a})}var Kn=function(n){var r=n.schema,u=n.value,a=r.children,g=r.attribute,f=g===void 0?{}:g,s=f.content;return(0,e.jsx)("div",{className:"preview pe-view",children:(0,e.jsx)(A.Z,{html:Ve(s,a,u),replaceP:!1},Math.random())})};(0,I.RM)("HorzBlank",Vn,"antd"),(0,I.cf)("HorzBlank",Kn,"antd");var Le=c(83279),pe=c(79521),Yn=c(54121),Gn=function(n){var r=(0,ye.XI)(200),u=(0,R.Z)(r,2),a=u[0],g=u[1],f=(0,ye.XI)(200),s=(0,R.Z)(f,2),o=s[0],x=s[1];return(0,e.jsxs)("div",(0,S.Z)((0,S.Z)({},n.getRowProps()),{},{className:"tr",style:{position:"relative"},ref:a,children:[n.cells.map(function(l){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getCellProps()),{},{className:"td","data-id":"".concat(n.i,"-").concat(l.column.id),children:l.render("Cell")}))}),n.onDelete&&(0,e.jsx)("div",{ref:o,style:{position:"absolute",left:-20,top:0,height:48,width:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,e.jsx)(Yn.Z,{onClick:function(){n.onDelete()},style:{color:"#f5222d",cursor:"pointer",visibility:g||x?"visible":"hidden"}})})]}))};function _e(t){var n=t.columns,r=t.data,u=t.onAdd,a=t.onDelete,g=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),f=(0,pe.useTable)({columns:n,data:r,defaultColumn:g},pe.useBlockLayout),s=f.getTableProps,o=f.getTableBodyProps,x=f.headerGroups,l=f.rows,i=f.prepareRow;return(0,e.jsxs)("div",(0,S.Z)((0,S.Z)({},s()),{},{className:"table",children:[(0,e.jsx)("div",{children:x.map(function(v){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},v.getHeaderGroupProps()),{},{className:"tr",children:v.headers.map(function(d){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},d.getHeaderProps()),{},{className:"th",children:d.render("Header")}))})}))})}),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},o()),{},{children:l.map(function(v,d){return i(v),(0,p.createElement)(Gn,(0,S.Z)((0,S.Z)({},v),{},{key:d,i:d,onDelete:a?function(){return a(d)}:void 0}))})})),u&&(0,e.jsx)("div",{className:"footer",onClick:u,children:"+ \u7EE7\u7EED\u586B\u5199"})]}))}function Qn(t){var n=t.schema,r=t.onChange,u=t.value||[{}],a=n.children,g=a===void 0?[]:a,f=(0,p.useMemo)(function(){return g.map(function(s){var o;return{Header:(0,e.jsx)(A.Z,{html:s.title}),width:(o=s.attribute)===null||o===void 0?void 0:o.width,accessor:s.id,Cell:function(l){var i,v=l.value,d=l.row,m=l.data;if(((i=s.attribute)===null||i===void 0?void 0:i.dataType)==="select"){var h;return(0,e.jsx)(E.Z,{placeholder:"\u8BF7\u9009\u62E9",value:v,style:{minWidth:80},onChange:function(j){m[d.index][s.id]=j},options:((h=s.dataSource)===null||h===void 0?void 0:h.map(function(C){return{label:C.label,value:C.value}}))||[]})}else return(0,e.jsx)(te.Z,{value:v,onChange:function(j){m[d.index][s.id]=j.target.value,r((0,Le.Z)(m))}})}}})},[]);return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(_e,{columns:f,data:u,onAdd:function(){u.push({}),r((0,Le.Z)(u))},onDelete:function(o){u.splice(o,1),r((0,Le.Z)(u))}})})}var Xn=function(n){var r=n.schema,u=n.value||[{},{}],a=r.children,g=a===void 0?[]:a,f=(0,p.useMemo)(function(){return g.map(function(s){var o;return{Header:(0,e.jsx)(A.Z,{html:s.title}),width:(o=s.attribute)===null||o===void 0?void 0:o.width,accessor:s.id,Cell:function(l){var i,v=l.value,d=l.row,m=l.data;if(((i=s.attribute)===null||i===void 0?void 0:i.dataType)==="select"){var h,C,j=((h=s.dataSource)===null||h===void 0||(C=h.find(function(y){return y.value===v}))===null||C===void 0?void 0:C.label)||"";return(0,e.jsx)("span",{children:j})}else return(0,e.jsx)("span",{children:v})}}})},[]);return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(_e,{columns:f,data:u})})};(0,I.RM)("MatrixAuto",Qn,"antd"),(0,I.cf)("MatrixAuto",Xn,"antd");var Ee=c(93224),Jn=["title","rowId"],qn=["title","rowId"];function en(t){var n=t.columns,r=t.data,u=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,pe.useTable)({columns:n,data:r,defaultColumn:u},pe.useBlockLayout),g=a.getTableProps,f=a.getTableBodyProps,s=a.headerGroups,o=a.rows,x=a.prepareRow;return(0,e.jsxs)("div",(0,S.Z)((0,S.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:s.map(function(l){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(i){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},i.getHeaderProps()),{},{className:"th",children:i.render("Header")}))})}))})}),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},f()),{},{children:o.map(function(l){return x(l),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(i){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},i.getCellProps()),{},{className:"td",children:i.render("Cell")}))})}))})}))]}))}function _n(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g,s=n.row,o=s===void 0?[]:s,x=(0,p.useMemo)(function(){var i,v=f.map(function(d){var m;return{Header:(0,e.jsx)(A.Z,{html:d.title}),width:(m=d.attribute)===null||m===void 0?void 0:m.width,accessor:d.id,Cell:function(C){var j,y=C.value,b=C.row,Z=C.data,w=(j=d.attribute)===null||j===void 0?void 0:j.dataType;return(0,e.jsxs)("div",{onClick:function(L){var T=!y,z={};Z.forEach(function(H,k){var U=H.title,V=H.rowId,W=(0,Ee.Z)(H,Jn);b.index===k&&(T?W[d.id]=!0:delete W[d.id]),z[V]=W}),r(z)},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsx)(Pe.Z,{checked:!!y}),w?(0,e.jsx)(oe,{type:w,style:{width:120,marginLeft:5},value:y===!0?"":y,onChange:function(L){var T={};Z.forEach(function(z,H){var k=z.title,U=z.rowId,V=(0,Ee.Z)(z,qn);b.index===H&&(V[d.id]=L),T[U]=V}),r(T)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((i=n.attribute)===null||i===void 0?void 0:i.width)||150,accessor:"title"}),v},[]),l=o.map(function(i,v){var d=i.id,m=a[d]||{};return(0,S.Z)({title:(0,e.jsx)(A.Z,{html:i.title}),rowId:d},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(en,{columns:x,data:l})})}var et=function(n){var r=n.schema,u=n.value,a=u===void 0?{}:u,g=r.children,f=g===void 0?[]:g,s=r.row,o=s===void 0?[]:s,x=(0,p.useMemo)(function(){var i,v=f.map(function(d){var m;return{Header:(0,e.jsx)(A.Z,{html:d.title}),width:(m=d.attribute)===null||m===void 0?void 0:m.width,accessor:d.id,Cell:function(C){var j=C.value,y=C.row,b=C.data;return j?(0,e.jsx)("div",{children:(0,e.jsx)(Pe.Z,{checked:!!j,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((i=r.attribute)===null||i===void 0?void 0:i.width)||150,accessor:"title"}),v},[]),l=o.map(function(i,v){var d=i.id,m=a[d]||{};return(0,S.Z)({title:(0,e.jsx)(A.Z,{html:i.title}),rowId:d},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(en,{columns:x,data:l})})};(0,I.RM)("MatrixCheckbox",_n,"antd"),(0,I.cf)("MatrixCheckbox",et,"antd");var nt=["title","rowId"];function nn(t){var n=t.columns,r=t.data,u=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,pe.useTable)({columns:n,data:r,defaultColumn:u},pe.useBlockLayout),g=a.getTableProps,f=a.getTableBodyProps,s=a.headerGroups,o=a.rows,x=a.prepareRow;return(0,e.jsxs)("div",(0,S.Z)((0,S.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:s.map(function(l){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(i){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},i.getHeaderProps()),{},{className:"th",children:i.render("Header")}))})}))})}),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},f()),{},{children:o.map(function(l){return x(l),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(i){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},i.getCellProps()),{},{className:"td","data-id":"".concat(l.original.rowId,"-").concat(i.column.id),children:i.render("Cell")}))})}))})}))]}))}function tt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g,s=n.row,o=s===void 0?[]:s,x=(0,p.useMemo)(function(){var i,v=f.map(function(d){var m;return{Header:(0,e.jsx)(A.Z,{html:d.title}),width:(m=d.attribute)===null||m===void 0?void 0:m.width,accessor:d.id,Cell:function(C){var j=C.value,y=C.row,b=C.data;return(0,e.jsx)(oe,{value:j,onChange:function(w){var P={};b.forEach(function(L,T){var z=L.title,H=L.rowId,k=(0,Ee.Z)(L,nt);y.index===T&&(k[d.id]=w),P[H]=k}),r(P)}})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:((i=n.attribute)===null||i===void 0?void 0:i.width)||150,accessor:"title"}),v},[]),l=o.map(function(i,v){var d=i.id,m=a[d]||{};return(0,S.Z)({title:(0,e.jsx)(A.Z,{html:i.title}),rowId:d},m)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(nn,{columns:x,data:l})})}var at=function(n){var r=n.schema,u=n.value,a=u===void 0?{}:u,g=r.children,f=g===void 0?[]:g,s=r.row,o=s===void 0?[]:s,x=(0,p.useMemo)(function(){var i,v=f.map(function(d){var m;return{Header:function(){return(0,e.jsx)(A.Z,{html:d.title})},width:(m=d.attribute)===null||m===void 0?void 0:m.width,accessor:d.id,Cell:function(C){var j=C.value;return(0,e.jsx)("span",{children:j})}}});return v.splice(0,0,{Header:(0,e.jsx)(e.Fragment,{}),width:(i=r.attribute)===null||i===void 0?void 0:i.width,accessor:"title"}),v},[]),l=o.map(function(i,v){var d=i.id,m=a[d]||{};return(0,S.Z)({title:i.title,rowId:d},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(nn,{columns:x,data:l})})};(0,I.RM)("MatrixFillBlank",tt,"antd"),(0,I.cf)("MatrixFillBlank",at,"antd");var rt=["title","rowId"],it=["title","rowId"];function tn(t){var n=t.columns,r=t.data,u=p.useMemo(function(){return{minWidth:100,width:150,maxWidth:400}},[]),a=(0,pe.useTable)({columns:n,data:r,defaultColumn:u},pe.useBlockLayout),g=a.getTableProps,f=a.getTableBodyProps,s=a.headerGroups,o=a.rows,x=a.prepareRow;return(0,e.jsxs)("div",(0,S.Z)((0,S.Z)({},g()),{},{className:"table",children:[(0,e.jsx)("div",{children:s.map(function(l){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getHeaderGroupProps()),{},{className:"tr",children:l.headers.map(function(i){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},i.getHeaderProps()),{},{className:"th",children:i.render("Header")}))})}))})}),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},f()),{},{children:o.map(function(l){return x(l),(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},l.getRowProps()),{},{className:"tr",children:l.cells.map(function(i){return(0,e.jsx)("div",(0,S.Z)((0,S.Z)({},i.getCellProps()),{},{className:"td",children:i.render("Cell")}))})}))})}))]}))}function lt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g,s=n.row,o=s===void 0?[]:s,x=(0,p.useMemo)(function(){var v;return((v=n.children)===null||v===void 0?void 0:v.filter(function(d){var m;return(m=d.attribute)===null||m===void 0?void 0:m.exclusiveFillBlankInMatrix}).map(function(d){return d.id}))||[]},[n]),l=(0,p.useMemo)(function(){var v,d,m=f.map(function(h){var C;return{Header:(0,e.jsx)(A.Z,{html:h.title}),width:(C=h.attribute)===null||C===void 0?void 0:C.width,accessor:h.id,Cell:function(y){var b,Z,w=y.value,P=y.row,L=y.data,T=(b=h.attribute)===null||b===void 0?void 0:b.exclusiveFillBlankInMatrix,z=(Z=h.attribute)===null||Z===void 0?void 0:Z.dataType;return(0,e.jsxs)("div",{onClick:function(){if(!T){var k={};L.forEach(function(U,V){var W=U.title,_=U.rowId,J=(0,Ee.Z)(U,rt);P.index===V?(k[_]={},x.forEach(function(ne){k[_][ne]=J[ne]}),k[_][h.id]=!0):k[_]=J}),r(k)}},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[!T&&(0,e.jsx)(Fe.ZP,{checked:!!w}),z?(0,e.jsx)(oe,{type:z,style:{width:120},value:w===!0?"":w,onChange:function(k){var U={};L.forEach(function(V,W){var _=V.title,J=V.rowId,ne=(0,Ee.Z)(V,it);P.index===W?(T?U[J]=ne:(U[J]={},x.forEach(function(ie){U[J][ie]=ne[ie]})),U[J][h.id]=k):U[J]=ne}),r(U)},onBlur:function(){}}):(0,e.jsx)("div",{style:{height:32,width:1}})]})}}});return m.splice(0,0,{Header:(0,e.jsx)(A.Z,{html:(v=n.attribute)===null||v===void 0?void 0:v.cornerText}),width:((d=n.attribute)===null||d===void 0?void 0:d.width)||150,accessor:"title"}),m},[]),i=o.map(function(v,d){var m=v.id,h=a[m]||{};return(0,S.Z)({title:(0,e.jsx)(A.Z,{html:v.title}),rowId:m},h)});return(0,e.jsx)("div",{className:"table-container",children:(0,e.jsx)(tn,{columns:l,data:i})})}var st=function(n){var r=n.schema,u=n.value,a=u===void 0?{}:u,g=r.children,f=g===void 0?[]:g,s=r.row,o=s===void 0?[]:s,x=(0,p.useMemo)(function(){var i,v,d=f.map(function(m){var h;return{Header:(0,e.jsx)(A.Z,{html:m.title}),width:(h=m.attribute)===null||h===void 0?void 0:h.width,accessor:m.id,Cell:function(j){var y=j.value,b=j.row,Z=j.data;return y?(0,e.jsx)("div",{children:(0,e.jsx)(Fe.ZP,{checked:!!y,disabled:!0})}):(0,e.jsx)(e.Fragment,{})}}});return d.splice(0,0,{Header:(0,e.jsx)(A.Z,{html:(i=r.attribute)===null||i===void 0?void 0:i.cornerText}),width:((v=r.attribute)===null||v===void 0?void 0:v.width)||150,accessor:"title"}),d},[]),l=o.map(function(i,v){var d=i.id,m=a[d]||{};return(0,S.Z)({title:(0,e.jsx)(A.Z,{html:i.title}),rowId:d},m)});return(0,e.jsx)("div",{className:"preview table-container",style:{flexDirection:"row"},children:(0,e.jsx)(tn,{columns:x,data:l})})};(0,I.RM)("MatrixRadio",lt,"antd"),(0,I.cf)("MatrixRadio",st,"antd");function ot(t){for(var n=[],r=2;r<t+2;r++)n.push(r/(t+2));return n}function ut(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=[],a=t;a<=n;a++)u.push(a);return r&&u.reverse(),u}function dt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g,s=f[0].id,o=(0,p.useState)(function(){return a[s]||-1}),x=(0,R.Z)(o,2),l=x[0],i=x[1];function v(m){r((0,re.Z)({},s,m))}(0,p.useEffect)(function(){Object.keys(a).length>0&&i(a[s])},[a,s]);var d=function(h){var C=a[h.id],j=h.attribute||{},y=j.scope,b=y===void 0?"[0,10]":y,Z=j.npsInvertSort,w=j.npsStart,P=w===void 0?"\u4E0D\u53EF\u80FD":w,L=j.npsEnd,T=L===void 0?"\u6781\u6709\u53EF\u80FD":L,z=b.replace("[","").replace("]","").split(","),H=(0,R.Z)(z,2),k=H[0],U=H[1],V=ot(l||0);return(0,e.jsxs)("div",{className:"nps",onMouseLeave:function(){i(C)},children:[(0,e.jsx)("div",{className:"nps-container",children:ut(parseInt(k),parseInt(U),Z).map(function(W){var _={background:"#2672ff",opacity:V[W]};return(0,e.jsx)("div",{className:"nps-item",style:l>=W?_:void 0,onMouseOver:function(){i(W)},onClick:function(){return v(W)},children:W},W)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:Z?T:P}),(0,e.jsx)("div",{children:Z?P:T})]})]},h.id)};return(0,e.jsx)(ue.Z,{children:f.map(function(m){return d(m)})})}(0,I.RM)("Nps",dt,"antd");var ct=Fe.ZP.Group;function vt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=t.onBlur,f=n.children,s=n.attribute,o=24/((s==null?void 0:s.columns)||1),x=(0,N.AK)("-body-question"),l=!!(s!=null&&s.statEnabled),i=(0,N.Rk)(),v=i.hiddenOption[n.id]||[],d=(0,N.Al)();function m(j){var y,b=j.target.value,Z=(y=n.children)===null||y===void 0?void 0:y.find(function(P){return P.id===b});if(Z){var w=Z.id;r((0,re.Z)({},j.target.value,a[w]||!0))}}(0,p.useEffect)(function(){var j=Object.keys(a)[0];v.includes(j)&&r(void 0)},[v]);function h(j,y){r((0,re.Z)({},j,y||!0),j)}function C(j,y){g((0,re.Z)({},j,y||!0),j)}return(0,p.useEffect)(function(){var j;(j=n.children)===null||j===void 0||j.forEach(function(y){var b,Z=y.id,w=y.attribute,P=w==null?void 0:w.dataType;(b=y.attribute)!==null&&b!==void 0&&b.defaultChecked&&Object.keys(a).length===0&&r((0,re.Z)({},Z,P?a[Z]:!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(ct,{onChange:m,value:Object.keys(a)[0],style:{width:"100%"},children:(0,e.jsx)(ue.Z,{children:f==null?void 0:f.filter(function(j){return!v.includes(j.id)}).map(function(j){var y,b,Z,w,P=j.id,L=(y=j.attribute)===null||y===void 0?void 0:y.dataType,T=(b=j.attribute)===null||b===void 0?void 0:b.suffix,z=(Z=j.attribute)===null||Z===void 0?void 0:Z.readOnly,H=(w=j.attribute)===null||w===void 0?void 0:w.quota,k=!1;if(H!==void 0){var U,V=d.statistics,W=V==null?void 0:V.questionStatistics[n.id],_=(W==null||(U=W.optionStatistics.find(function(ne){return ne.optionId===P}))===null||U===void 0?void 0:U.count)||0,J=H-_;J<=0&&(k=!0)}return(0,e.jsxs)(le.Z,{span:o,className:x+"-option","data-id":P,children:[(0,e.jsx)(jn,{qId:n.id,schema:j,disabled:k,value:a[P],onChange:function(ie){return h(P,ie)},onBlur:function(ie){return C(P,ie)}}),(0,e.jsx)(Ue,{statEnabled:l,quota:H,checked:!!a[P],optionId:P,questionId:n.id,checkedCount:Object.keys(a).length}),L&&(0,e.jsx)(oe,{value:a[P]===!0?"":a[P],type:L,schema:j,readOnly:z,style:{maxWidth:200},onChange:function(ie){return h(P,ie)},onBlur:function(ie){return C(P,ie)},suffix:T&&(0,e.jsx)("span",{className:x+"-option-suffix",children:(0,e.jsx)(A.Z,{html:T})})})]},P)})})})})}(0,I.RM)("Radio",(0,$.Pi)(vt),"antd");function ht(t){var n=(0,N.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(A.Z,{html:"".concat(t.replaceTitle||t.schema.title||"")})})}var ft=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(A.Z,{html:"".concat(n.replaceTitle||n.schema.title||"")})})};(0,I.RM)("Remark",ht,"antd"),(0,I.cf)("Remark",ft,"antd");var na=c(96433),ke=c(2864),an=c(41687),mt=c(46870),rn=c(18613),xt=c(57206),gt={1:(0,e.jsx)(an.Z,{}),2:(0,e.jsx)(an.Z,{}),3:(0,e.jsx)(mt.Z,{}),4:(0,e.jsx)(rn.Z,{}),5:(0,e.jsx)(rn.Z,{})};function jt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g;function s(x,l){r((0,re.Z)({},x,l))}var o=function(l){var i=l.attribute||{},v=l.id,d=i.scope,m=d===void 0?"[0,5]":d,h=i.scoreStyle,C=m.replace("[","").replace("]","").split(","),j=(0,R.Z)(C,2),y=j[0],b=j[1];return h==="heart"?(0,e.jsx)(ke.Z,{defaultValue:parseInt(y),character:(0,e.jsx)(xt.Z,{}),style:{color:"#ea7463"},value:a[v],count:parseInt(b),onChange:function(w){return s(v,w)}},v):h==="smile"?(0,e.jsx)(ke.Z,{defaultValue:parseInt(y),character:function(w){var P=w.index;return gt[P+1]},count:parseInt(b),onChange:function(w){return s(v,w)},value:a[v]},v):(0,e.jsx)(ke.Z,{defaultValue:parseInt(y),count:parseInt(b),value:a[v],onChange:function(w){return s(v,w)}},v)};return(0,e.jsx)(ue.Z,{children:f.map(function(x){return o(x)})})}(0,I.RM)("Score",jt,"antd");function Ct(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g;function s(o){var x,l=(x=n.children)===null||x===void 0?void 0:x.find(function(i){return i.id===o});l&&r((0,re.Z)({},o,!0))}return(0,p.useEffect)(function(){var o;(o=n.children)===null||o===void 0||o.forEach(function(x){var l,i=x.id;(l=x.attribute)!==null&&l!==void 0&&l.defaultChecked&&Object.keys(a).length===0&&r((0,re.Z)({},i,!0))})},[]),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(le.Z,{span:12,children:(0,e.jsx)(E.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,onClear:function(){r(void 0)},showSearch:!0,value:Object.keys(a)[0],filterOption:function(x,l){return(l==null?void 0:l.label).toLowerCase().indexOf(x.toLowerCase())!==-1},onChange:s,style:{width:260},options:f.map(function(o){return{label:o.title,value:o.id}})})})})}(0,I.RM)("Select",Ct,"antd");var ta=c(34669),yt=c(82833);function ln(t){var n=t.schema,r=t.onChange,u=n.children,a=(0,N.Al)(),g=(0,p.useState)(0),f=(0,R.Z)(g,2),s=f[0],o=f[1];function x(l,i){var v="signature-".concat(i,"-").concat((0,K.kb)(6),".png");if(!a.onUpload){r((0,re.Z)({},i,[v]));return}fetch(l).then(function(d){return d.blob()}).then(function(d){var m=new File([d],v,{type:"image/png"});a.onUpload({file:m},function(h){o(h.loaded/h.total*100)}).then(function(h){h.success&&h.data.id&&r((0,re.Z)({},i,[h.data.id]))})})}return(0,e.jsx)("div",{children:u==null?void 0:u.map(function(l){var i=l.id,v=l.title;return(0,e.jsxs)(ue.Z,{gutter:[10,0],"data-id":i,children:[v&&(0,e.jsx)(le.Z,{span:24},l.id),(0,e.jsxs)(le.Z,{span:24,children:[(0,e.jsx)(on,{onChange:function(m){return x(m,i)}}),s>0&&s!==100&&(0,e.jsx)(yt.Z,{percent:s,size:"small",showInfo:!1})]})]},i)})})}ln.Preview=function(t){var n=t.value,r;return n&&(r=Object.values(n)[0][0]),(0,e.jsx)("div",{className:"preview signature-print",children:r&&(0,e.jsx)("img",{src:"/api/file?id=".concat(r)})})},(0,I.RM)("Signature",ln,"antd");var ze=c(27049);function pt(t){var n=(0,N.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(ze.Z,{plain:!0})})}var bt=function(n){return(0,e.jsx)("div",{children:(0,e.jsx)(ze.Z,{plain:!0})})};(0,I.RM)("SplitLine",pt,"antd"),(0,I.cf)("SplitLine",bt,"antd");function Zt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=(0,N.AK)("-body-question");function s(o,x){a[o]=x,x===""&&delete a[o],r((0,S.Z)({},a))}return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(o){var x=o.id,l=o.attribute,i=o.title,v=(0,K.Ck)(l==null?void 0:l.autoSize,[2,4]);return(0,e.jsxs)(ue.Z,{style:{marginBottom:10},"data-id":x,children:[i&&(0,e.jsx)(le.Z,{className:f+"-option",span:4,children:o.title&&(0,e.jsx)("span",{className:f+"-option-title",children:o.title})},o.id),(0,e.jsx)(le.Z,{span:12,children:(0,e.jsx)(te.Z.TextArea,{autoSize:{minRows:v[1],maxRows:v[2]},value:a[x]||"",onChange:function(m){return s(x,m.target.value)}})})]},x)})})}(0,I.RM)("Textarea",Zt,"antd");var wt=c(43347),Bt=Ie.Z.Dragger;function St(t){var n=t.schema,r=t.onChange,u=t.value,a=t.readOnly,g=n.children,f=(0,N.Al)(),s=(0,p.useState)(),o=(0,R.Z)(s,2),x=o[0],l=o[1];(0,p.useEffect)(function(){var d=n.children[0].id,m=u&&u[d]||[];x==null&&m.length>0&&ye.hi.loadFiles({ids:m}).then(function(h){l(h==null?void 0:h.map(function(C){return{name:C.originalName,uid:C.id,status:"done"}}))})},[u]);var i=function(){var d=(0,Xe.Z)((0,Oe.Z)().mark(function m(h){var C,j,y,b;return(0,Oe.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:C=h.onSuccess,j=h.onError,y=h.file,b=h.onProgress,f.onUpload&&f.onUpload({file:y},function(P){b&&b({percent:P.loaded/P.total*100})}).then(function(P){if(P.success&&C&&C(P.data),!P.success&&j){var L=new Error("Some error");j({event:L})}});case 2:case"end":return w.stop()}},m)}));return function(h){return d.apply(this,arguments)}}(),v=function(m,h){if(l(m.fileList),(m.file.status==="removed"||m.file.status==="done")&&!m.fileList.find(function(j){return j.status!=="done"})){var C=m.fileList.filter(function(j){return j.status==="done"}).map(function(j){var y;return((y=j.response)===null||y===void 0?void 0:y.id)||j.uid});C.length===0?r(void 0):r((0,re.Z)({},h,C))}};return(0,e.jsx)("div",{children:g==null?void 0:g.map(function(d){var m=d.id,h=d.attribute,C=[];if(h){var j=h.maxFileCount,y=h.maxFileSize,b=h.fileAccept;j&&C.push("\u6700\u591A\u4E0A\u4F20".concat(j,"\u4E2A")),y&&C.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(y,"M\u4EE5\u5185")),b&&C.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(b))}return(0,e.jsxs)(Bt,{multiple:!0,disabled:a,maxCount:(h==null?void 0:h.maxFileCount)||20,accept:h==null?void 0:h.fileAccept,beforeUpload:function(w){return h!=null&&h.maxFileSize&&w.size>h.maxFileSize*1024*1024?(Qe.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(h.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),Ie.Z.LIST_IGNORE):!0},customRequest:i,onChange:function(w){return v(w,m)},fileList:x,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(wt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:C.join(",")})]},m)})})}(0,I.RM)("Upload",St,"antd");var Nt=c(55686),Et=c(43844),He=function(){return He=Object.assign||function(t){for(var n,r=1,u=arguments.length;r<u;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},He.apply(this,arguments)},Pt=function(t){var n,r=(0,Et.Hp)();return p.createElement(De.Z,He({size:(n=t.size)!==null&&n!==void 0?n:r==null?void 0:r.spaceGap},t))},At=Pt,Ft=E.Z.Option;function Mt(t){var n=t.schema,r=t.onChange,u=t.value,a=u===void 0?{}:u,g=n.children,f=g===void 0?[]:g,s=f[0].id,o=(0,p.useState)([]),x=(0,R.Z)(o,2),l=x[0],i=x[1];function v(h){s&&r((0,re.Z)({},s,h))}var d=(0,ye.zE)(function(h){ye.hi.selectUser({name:h,selected:a[s]||[]}).then(function(C){C.success&&i(C.data)})},5),m=function(C){v(C?l.map(function(j){return j.userId}):void 0)};return(0,p.useEffect)(function(){var h;d(""),(h=n.children)===null||h===void 0||h.forEach(function(C){var j,y=C.id;(j=C.attribute)!==null&&j!==void 0&&j.defaultChecked&&Object.keys(a).length===0&&r((0,re.Z)({},y,!0))})},[]),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(le.Z,{span:24,children:(0,e.jsx)(E.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){r(void 0)},style:{width:"100%"},value:a[s]||[],onSearch:d,showSearch:!0,onChange:v,dropdownRender:function(C){return(0,e.jsxs)("div",{children:[C,(0,e.jsx)(ze.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(Pe.Z,{onChange:function(y){m(y.target.checked)},children:"\u5168\u9009"})})]})},children:l.map(function(h){return(0,e.jsx)(Ft,{value:h.userId,label:h.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Nt.Z,{user:h,size:20})}),h.name," ",h.deptName&&"(".concat(h.deptName,")")]})},h.userId)})})})})}var It=function(n){var r=n.schema,u=n.value,a=u===void 0?{}:u,g=r.children,f=g===void 0?[]:g,s=f[0].id,o=(0,p.useState)([]),x=(0,R.Z)(o,2),l=x[0],i=x[1];return(0,p.useEffect)(function(){ye.hi.selectUser({selected:a[s]||[],name:"^_^"}).then(function(v){v.success&&i(v.data)})},[]),(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)(At,{children:l.map(function(v){return(0,e.jsx)(Je.Z,{color:"blue",children:v.name},v.userId)})})})};(0,I.RM)("User",Mt,"antd"),(0,I.cf)("User",It,"antd");var Ot=c(73328),Rt=function(n){var r=(0,p.useRef)(null),u=(0,p.useState)(!1),a=(0,R.Z)(u,2),g=a[0],f=a[1];return(0,Ot.Z)(r,function(){f(!1)}),(0,e.jsx)("div",{className:Be()("preview",{active:g}),ref:r,onClick:function(){f(!0)},children:(0,e.jsx)(A.Z,{html:Object.values(n.value||{})[0]})})};(0,K.cf)("RichText",Rt,"antd");var Dt=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},Tt=Dt;(0,K.RM)("RichText",(0,p.lazy)(function(){return Promise.all([c.e(9548),c.e(4177),c.e(6779),c.e(3710),c.e(2684),c.e(6625),c.e(596),c.e(811),c.e(7462)]).then(c.bind(c,27321))}),"antd"),(0,K.cf)("Upload",(0,p.lazy)(function(){return Promise.all([c.e(9548),c.e(6779),c.e(6661),c.e(4502),c.e(9452)]).then(c.bind(c,43640))}),"antd")},55686:function(ve,ae,c){"use strict";var R=c(11849),K=c(94233),A=c(51890),$=c(93224),p=c(89366),N=c(85893),I=["user"],q=function(he){var de=he.user,se=(0,$.Z)(he,I);return!de||!de.avatar?(0,N.jsx)(A.C,(0,R.Z)({icon:(0,N.jsx)(p.Z,{}),size:se.size||"small"},se)):(0,N.jsx)(A.C,(0,R.Z)({src:"/api/public/preview/".concat(de.avatar),size:se.size||"small"},se))};ae.Z=q},78210:function(ve,ae,c){"use strict";var R=c(27856),K=c.n(R),A=c(15020),$=c(85893),p=function(I){var q=I.html,e=q===void 0?"":q,he=I.replaceP,de=he===void 0?!0:he;return de?(0,$.jsx)("div",{className:"pe-view",children:typeof e=="string"&&(0,A.ZP)(K().sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]}).replace(/<p>/,"<span>").replace(/<\/p>/,"</span>"))}):(0,$.jsx)($.Fragment,{children:typeof e=="string"&&(0,A.ZP)(K().sanitize(e))})};ae.Z=p},49914:function(ve,ae,c){"use strict";c.d(ae,{H:function(){return A}});var R=c(67294),K=c(96389);function A(){return(0,R.useContext)(K.ff)}},39002:function(ve,ae,c){"use strict";var R=c(38663),K=c.n(R),A=c(92801),$=c.n(A),p=c(14965)}}]);
